<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>The Sparta Modeling Framework: /github/workspace/sparta/sparta/statistics/HistogramFunctionManager.hpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">The Sparta Modeling Framework
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('HistogramFunctionManager_8hpp.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle"><div class="title">HistogramFunctionManager.hpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;functional&gt;</code><br />
<code>#include &lt;map&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &quot;<a class="el" href="Histogram_8hpp_source.html">sparta/statistics/Histogram.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="CycleHistogram_8hpp_source.html">sparta/statistics/CycleHistogram.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MetaStructs_8hpp_source.html">sparta/utils/MetaStructs.hpp</a>&quot;</code><br />
</div>
<p><a href="HistogramFunctionManager_8hpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsparta_1_1FunctionManager.html">sparta::FunctionManager</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Singleton Function Manager class. This class contains two maps and one constant string token. These maps contain a string as key and function pointers as value. The string key is the same as the name of the free functions as defined by the users and the keys are the function pointers to those methods. One map is dedicated for HistogramTreeNodes while the other is dedicated for CycleHistogramTreeNodes. This was necessary because these two classes do not share a common polymorphic base.  <a href="classsparta_1_1FunctionManager.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesparta.html">sparta</a></td></tr>
<tr class="memdesc:namespacesparta"><td class="mdescLeft">&#160;</td><td class="mdescRight">Macros for handling exponential backoff. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a900d38a1255f621068d2acccb4c277fc" id="r_a900d38a1255f621068d2acccb4c277fc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a900d38a1255f621068d2acccb4c277fc">REGISTER_HISTOGRAM_STAT_CALC_FCN</a>(histogram_type,  fcn_name)</td></tr>
<tr class="memdesc:a900d38a1255f621068d2acccb4c277fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function Registration Macro for Histogram/CycleHistogram. This macro is called by the users in their code when they are trying to register a free function for stat collection. This macro takes two parameters, the name of the method they are trying to register and the type of argument this method takes whether it is a HistogramTreeNode or a CycleHistogramTreeNode.  <br /></td></tr>
<tr class="separator:a900d38a1255f621068d2acccb4c277fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a3cd097dc2b5ef707ef5837ede254ce24" id="r_a3cd097dc2b5ef707ef5837ede254ce24"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a3cd097dc2b5ef707ef5837ede254ce24"><td class="memTemplItemLeft" align="right" valign="top">using&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacesparta.html#a3cd097dc2b5ef707ef5837ede254ce24">sparta::HistStatCalcFcn</a> = double (*)(const T*)</td></tr>
<tr class="separator:a3cd097dc2b5ef707ef5837ede254ce24"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains a Singleton Function Manager which stores function names and function pointers as key-value pair in maps. There are two separate maps for histogram and cyclehistogram nodes. This file also contains the macro that users will need in order to register statistic calculation functions.</p>
<p>the following is an example usage. Step 1 - The user writes their free function. </p><div class="fragment"><div class="line"><span class="keywordtype">double</span> get_bin_count_greater_than_3_Stdev(</div>
<div class="line">    <span class="keyword">const</span> <a class="code hl_class" href="classsparta_1_1HistogramTreeNode.html">sparta::HistogramTreeNode</a>* h)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">double</span> total = 0.0;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span> std_dev = h-&gt;<a class="code hl_function" href="classsparta_1_1HistogramBase.html#a24bb2be942862fbb18027479d3107bd0">getStandardDeviation</a>();</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span> uf = h-&gt;getUnderflowBinCount();</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span> of = h-&gt;getOverflowBinCount();</div>
<div class="line">    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; bin_counts = h-&gt;getBinCount();</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; bin : bin_counts){</div>
<div class="line">        <span class="keywordflow">if</span>(bin &gt; (3 * std_dev)){</div>
<div class="line">            total += bin;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span>(uf &gt; (3 * std_dev)){</div>
<div class="line">        total += uf_p;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span>(of &gt; (3 * std_dev)){</div>
<div class="line">        total += of_p;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> total;</div>
<div class="line">}</div>
<div class="ttc" id="aclasssparta_1_1HistogramBase_html_a24bb2be942862fbb18027479d3107bd0"><div class="ttname"><a href="classsparta_1_1HistogramBase.html#a24bb2be942862fbb18027479d3107bd0">sparta::HistogramBase::getStandardDeviation</a></div><div class="ttdeci">double getStandardDeviation() const</div><div class="ttdoc">Calculate Standard Deviation of counts in bins. This API also takes into account the count in underfl...</div><div class="ttdef"><b>Definition</b> <a href="Histogram_8hpp_source.html#l00105">Histogram.hpp:105</a></div></div>
<div class="ttc" id="aclasssparta_1_1HistogramTreeNode_html"><div class="ttname"><a href="classsparta_1_1HistogramTreeNode.html">sparta::HistogramTreeNode</a></div><div class="ttdef"><b>Definition</b> <a href="Histogram_8hpp_source.html#l00425">Histogram.hpp:426</a></div></div>
</div><!-- fragment --><p> Step 2 - The user registers this method with the registration macro. </p><div class="fragment"><div class="line"><a class="code hl_define" href="#a900d38a1255f621068d2acccb4c277fc">REGISTER_HISTOGRAM_STAT_CALC_FCN</a>(HistogramTreeNode, get_bin_count_greater_than_3_Stdev);</div>
<div class="ttc" id="aHistogramFunctionManager_8hpp_html_a900d38a1255f621068d2acccb4c277fc"><div class="ttname"><a href="#a900d38a1255f621068d2acccb4c277fc">REGISTER_HISTOGRAM_STAT_CALC_FCN</a></div><div class="ttdeci">#define REGISTER_HISTOGRAM_STAT_CALC_FCN(histogram_type, fcn_name)</div><div class="ttdoc">Function Registration Macro for Histogram/CycleHistogram. This macro is called by the users in their ...</div><div class="ttdef"><b>Definition</b> <a href="HistogramFunctionManager_8hpp_source.html#l00254">HistogramFunctionManager.hpp:254</a></div></div>
</div><!-- fragment --><p>. Step 3 - User should know the exact fullpath of the histogram they are using in the device tree. Step 4 - If the fullpath of a certain histogram is top.core0.hist_node, then to get their free function as a statdef in reports, they should use the hist_def keyword and make it a prefix in the path string. For example, their yaml could look like this : content: top: hist_def.core0.hist_node.get_bin_count_greater_than_3_Stdev : my_stat top.core0: hist_def.hist_node.get_bin_count_less_than_mean : my_stat2 top.core0.hist_node: hist_def.get_bin_count_greater_than_mean : my_stat3 Using the hist_def keyword is essential as this tells the yaml parser to go and look in the Histogram Function Manager class for the string name. </p>

<p class="definition">Definition in file <a class="el" href="HistogramFunctionManager_8hpp_source.html">HistogramFunctionManager.hpp</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a900d38a1255f621068d2acccb4c277fc" name="a900d38a1255f621068d2acccb4c277fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a900d38a1255f621068d2acccb4c277fc">&#9670;&#160;</a></span>REGISTER_HISTOGRAM_STAT_CALC_FCN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REGISTER_HISTOGRAM_STAT_CALC_FCN</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>histogram_type</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>fcn_name</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">{                                                                                               \</div>
<div class="line">    static_assert(<a class="code hl_struct" href="structMetaStruct_1_1matches__any.html">MetaStruct::matches_any</a>&lt;sparta::histogram_type,                                 \</div>
<div class="line">                                          <a class="code hl_class" href="classsparta_1_1HistogramTreeNode.html">sparta::HistogramTreeNode</a>,                              \</div>
<div class="line">                                          <a class="code hl_class" href="classsparta_1_1CycleHistogramTreeNode.html">sparta::CycleHistogramTreeNode</a>&gt;::value,                 \</div>
<div class="line">        <span class="stringliteral">&quot;Invalid class type used for histogram stat calculation registration.&quot;</span>);                \</div>
<div class="line">    std::string key = #fcn_name;                                                                \</div>
<div class="line">    sparta::HistStatCalcFcn&lt;sparta::histogram_type&gt; callable = fcn_name;                            \</div>
<div class="line">    sparta::FunctionManager::get().add&lt;sparta::histogram_type&gt;(key, callable);                      \</div>
<div class="line">}</div>
<div class="ttc" id="aclasssparta_1_1CycleHistogramTreeNode_html"><div class="ttname"><a href="classsparta_1_1CycleHistogramTreeNode.html">sparta::CycleHistogramTreeNode</a></div><div class="ttdoc">CycleHistogramTreeNode class for uint64_t values.</div><div class="ttdef"><b>Definition</b> <a href="CycleHistogram_8hpp_source.html#l00696">CycleHistogram.hpp:697</a></div></div>
<div class="ttc" id="astructMetaStruct_1_1matches__any_html"><div class="ttname"><a href="structMetaStruct_1_1matches__any.html">MetaStruct::matches_any</a></div><div class="ttdoc">This templated struct takes a target type and another parameter pack of types and returns a nested bo...</div><div class="ttdef"><b>Definition</b> <a href="MetaStructs_8hpp_source.html#l00161">MetaStructs.hpp:161</a></div></div>
</div><!-- fragment -->
<p>Function Registration Macro for Histogram/CycleHistogram. This macro is called by the users in their code when they are trying to register a free function for stat collection. This macro takes two parameters, the name of the method they are trying to register and the type of argument this method takes whether it is a HistogramTreeNode or a CycleHistogramTreeNode. </p>
<p>Example : Calculate three times the standard deviation of all counts in regular and over/under flow bins. double stdev_x3(const sparta::CycleHistogramTreeNode* h) { return (h-&gt;getStandardDeviation()) * 3; }</p>
<p><a class="el" href="#a900d38a1255f621068d2acccb4c277fc" title="Function Registration Macro for Histogram/CycleHistogram. This macro is called by the users in their ...">REGISTER_HISTOGRAM_STAT_CALC_FCN(CycleHistogramTreeNode, stdev_x3)</a>; </p>

<p class="definition">Definition at line <a class="el" href="HistogramFunctionManager_8hpp_source.html#l00254">254</a> of file <a class="el" href="HistogramFunctionManager_8hpp_source.html">HistogramFunctionManager.hpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8b51add0bc6ff831487a715a42aa15b5.html">sparta</a></li><li class="navelem"><a class="el" href="dir_45da86fda3aafc4afd8ad9131b097bb6.html">statistics</a></li><li class="navelem"><a class="el" href="HistogramFunctionManager_8hpp.html">HistogramFunctionManager.hpp</a></li>
    <li class="footer">Generated on Fri Aug 22 2025 17:16:11 for The Sparta Modeling Framework by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
